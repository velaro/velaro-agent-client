jobs:
- job: Windows
  pool:
    vmImage: vs2017-win2016
  steps:
    - task: NodeTool@0
      inputs:
        versionSpec: 12.18.4
      displayName: Install Node.js
    - script: yarn
      displayName: Install Packages
    - script: yarn dist:win:nsis
      displayName: Deploy NSIS
    - script: yarn dist:win:zip
      displayName: Deploy ZIP

- job: macOS
  pool:
    vmImage: macOS-10.15
  variables:
    - name: CSC_LINK
      value: https://v10prodappsettings.blob.core.windows.net/certs/velaro_mac.p12
  steps:
    - task: NodeTool@0
      inputs:
        versionSpec: 12.18.4
      displayName: Install Node.js
    - script: yarn
      displayName: Install Packages
    - script: yarn dist:mac:dmg
      displayName: Deploy DMG
    - script: yarn dist:mac:zip
      displayName: Deploy ZIP
